# Vulnerability scanning

## 概要

脆弱性スキャンを GCP 上で行ってくれるコンポーネント


+ 公式ブログ

```
Container Registry の脆弱性スキャンで安全な CI/CD パイプラインを
https://cloud.google.com/blog/ja/products/gcp/guard-against-security-vulnerabilities-with-container-registry-vulnerability-scanning
```

## 設定方法

### 1. API の有効

+ API の有効化
  + https://console.cloud.google.com/marketplace/product/google/containerscanning.googleapis.com

```
gcloud beta services enable containerscanning.googleapis.com --project "Your Google Cloud Project ID"
```

<details>
<summary>スクリーンショット 1</summary>

![](./_img/vulnerability-scanning-01.png)

</details>
<details>
<summary>スクリーンショット 2</summary>

![](./_img/vulnerability-scanning-02.png)

</details>

### Role を付与

+ 必要な Permmision
  + artifactregistry.projectsettings.update
  + storage.buckets.update
    + なぜか Owner が持っていない Permission

+ 必要最低限の Role
  + Artifact Registry Administrator (roles/artifactregistry.admin)
  + Storage Admin(roles/storage.admin)

<details>
<summary>スクリーンショット 3</summary>

![](./_img/vulnerability-scanning-03.png)

</details>

### Cloud Console でクリック

Cloud Console 上で `Route to Artifact Registry` をクリック

<details>
<summary>スクリーンショット 4</summary>

![](./_img/vulnerability-scanning-04.png)

</details>

---> これで設定は完了です

## 脆弱性が出ている例

TBD
